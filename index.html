<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href=".github/assets/logo.ico" />
    <link rel="icon" type="image/png" href=".github/assets/logo.png" />
    <link rel="apple-touch-icon" href=".github/assets/logo.png" />
    <link rel="stylesheet" href="demo/style.css">
    <title>GradientGL - WebGL-powered animated gradients</title>
    <base href="/gradient-gl/">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="WebGL-powered animated gradients with deterministic variations" />
    <meta name="author" content="metaory" />
    <meta property="og:title" content="GradientGL - WebGL-powered animated gradients" />
    <meta property="og:description" content="WebGL-powered animated gradients with deterministic variations" />
    <meta property="og:image" content="https://raw.githubusercontent.com/metaory/gradient-gl/refs/heads/master/.github/assets/social.jpg" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://metaory.github.io/gradient-gl/" />
    <meta property="og:author" content="metaory" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="GradientGL" />
    <meta name="twitter:description" content="WebGL-powered animated gradients with deterministic variations" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/metaory/gradient-gl/refs/heads/master/.github/assets/social.jpg" />
    <meta name="twitter:creator" content="@metaory" />
    <style>
        :root {
            color-scheme: only dark;
            background-color: black;
            --h: 270;
            --ss: hsl(var(--h) 50% 10% / 0.1);
            --xs: hsl(var(--h) 50% 10% / 0.2);
            --lo: hsl(var(--h) 50% 10% / 0.3);
            --md: hsl(var(--h) 50% 10% / 0.4);
            --bg: hsl(var(--h) 50% 10% / 0.5);
            --fg: hsl(var(--h) 20% 80%);
            --sh: hsl(var(--h) 0% 0% / 0.5);
            --pk0: #FF4488;
            --pk1: #EE4499;
            --wk1: #4411BB;
            --sk2: #33114476;
            --sk3: #441A5576;
            --sk8: #AA55BB76;
            --zk2: #CC66CC;
            --spacing-ss: 0.4rem;
            --spacing-xs: 0.6rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.4rem;
            --spacing-xl: 1.6rem;
            --input-height: 0.5rem;
            --thumb-size: 1rem;
            --radius-sm: .6rem;
            --radius-md: .8rem;
            --radius-lg: 1.4rem;
            --radius-xl: 2rem;
            --blur-amount: 20px;
            --shadow-lg: 0 0 2rem var(--sh);
            --shadow-md: 0 0 1rem var(--sh);
            --c1: #f0f;
            --c2: #0ff;
            --c3: #ff0;
            --blur: 12px;
            --size: 100px;
        }

        @font-face {
            font-family: krypton;
            font-style: normal;
            font-display: swap;
            font-weight: 600;
            src: url(https://cdn.jsdelivr.net/fontsource/fonts/monaspace-krypton@latest/latin-600-normal.woff2) format('woff2'), url(https://cdn.jsdelivr.net/fontsource/fonts/monaspace-krypton@latest/latin-600-normal.woff) format('woff');
        }

        @font-face {
            font-family: krypton;
            font-style: normal;
            font-display: swap;
            font-weight: 800;
            src: url(https://cdn.jsdelivr.net/fontsource/fonts/monaspace-krypton@latest/latin-800-normal.woff2) format('woff2'), url(https://cdn.jsdelivr.net/fontsource/fonts/monaspace-krypton@latest/latin-800-normal.woff) format('woff');
        }

        * {
            font-family: krypton, monospace;
        }

        body {
            margin: 0;
            overflow: hidden;
            min-height: 100vh;
            display: grid;
            place-items: start center;
            user-select: none;
            padding-top: 10vh;
        }

        main {
            z-index: 1;
            padding: var(--spacing-xl);
            border-radius: var(--radius-lg);
            color: var(--fg);
            min-width: 20rem;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            mix-blend-mode: difference;
        }

        @media (pointer: coarse) and (hover: none) {
            main {
                position: fixed;
                inset: 0;
                width: 80vw;
                height: 90vh;
                padding: 1rem;
                margin: 5em auto;
                border-radius: 0;
                overflow-y: auto;
            }
        }

        main.hidden {
            opacity: 0;
            visibility: hidden;
        }

        canvas {
            width: 100vw;
            height: 100vh;
            display: block;
            position: fixed;
            inset: 0;
            z-index: 0;
        }

        button {
            opacity: 0.6;
            padding: var(--spacing-ss);
            text-align: center;
            text-transform: uppercase;
            background: var(--ss);
            backdrop-filter: blur(var(--blur-amount));
            border: none;
            box-shadow: none;
            outline: none;
            border-radius: var(--radius-sm);
            transition: all 0.2s;
            cursor: pointer;
            color: var(--fg);
            border: none;
            font-size: 1rem;

            &:hover {
                opacity: 0.6;
                background: var(--sk2);
            }

            &:focus {
                background-color: var(--ss);
            }
        }

        #toggle {
            position: fixed;
            top: var(--spacing-md);
            right: var(--spacing-md);
            z-index: 2;
            background: transparent;
            border: none;
            color: var(--fg);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
            mix-blend-mode: color-dodge;
            width: auto;
            height: auto;
        }

        #github {
            mix-blend-mode: color-dodge;
            position: fixed;
            /* mix-blend-mode: difference; */
            top: var(--spacing-lg);
            left: var(--spacing-lg);
            color: var(--fg);
            opacity: 0.6;
            z-index: 2;
        }

        #actions {
            z-index: 2;
            opacity: 0.6;
            mix-blend-mode: color-dodge;
            position: absolute;
            bottom: 14vh;
            button {
                margin: auto 1rem;
            }
        }

        #seed {
            position: fixed;
            top: var(--spacing-md);
            left: 50%;
            text-transform: uppercase;
            transform: translateX(-50%);
            backdrop-filter: blur(var(--blur-amount));
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            font-size: 2rem;
            text-align: center;
            z-index: 2;
            mix-blend-mode: difference;
        }

        #shaders {
            display: grid;
            gap: var(--spacing-xs);
            width: 100%;
        }

        .shader-type {
            display: grid;
            grid-auto-flow: column;
            border-radius: var(--radius-md);
            gap: var(--spacing-md);
            width: 100%;
        }

        .shader {
            opacity: 0.6;

            svg {
                color: currentColor;
                opacity: 0.6;
            }

            &[data-selected="true"] {
                background: var(--sk3);
                color: white;
                font-weight: bold;
                opacity: 1;
                box-shadow: 0 0 1rem var(--sk2);
            }
        }

        #options {
            display: grid;
            gap: var(--spacing-md);
            width: 90%;
            padding: 1em;
            margin: 1rem auto;
            border-radius: var(--radius-lg);
            backdrop-filter: blur(var(--blur-amount));

            /* &>.shader-type {
                background-color: var(--bg) !important;
            } */
        }

        input[type="range"] {
            width: 100%;
            height: var(--input-height);
            background-color: var(--xs);
            border-radius: var(--radius-sm);
            appearance: none;
            position: relative;
            margin-top: 1.2rem;

            &::before {
                content: attr(title);
                position: absolute;
                left: 0;
                top: -1.2rem;
                color: var(--fg);
                font-size: 0.9rem;
                opacity: 0.8;
            }

            &::after {
                content: attr(data-hex-value);
                position: absolute;
                right: 0;
                top: -1.2rem;
                color: var(--fg);
                mix-blend-mode: difference;
                font-size: 0.9rem;
                font-weight: bold;
            }

            &::-webkit-slider-thumb {
                appearance: none;
                width: var(--thumb-size);
                height: var(--thumb-size);
                background-color: var(--fg);
                border-radius: 30%;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 0 0.8rem var(--sh);
                border: none;

                &:hover {
                    transform: scale(1.2);
                    background: var(--pk1);
                    opacity: 1;
                }
            }

            &::-moz-range-thumb {
                appearance: none;
                width: var(--thumb-size);
                height: var(--thumb-size);
                background-color: var(--fg);
                border-radius: 30%;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 0 0.8rem var(--sh);
                border: none;

                &:hover {
                    transform: scale(1.2);
                    background: var(--pk1);
                    opacity: 1;
                }
            }
        }

        .usage {
            font-family: monospace;
            font-size: 0.9rem;
            padding: var(--spacing-xs);
            border-radius: var(--radius-lg);
            opacity: 0.8;
            white-space: pre;
            overflow: hidden;
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 40rem;
            max-height: 30vh;
            margin-bottom: var(--spacing-xs);
            box-shadow: var(--shadow-lg);
            transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1;
            background: var(--bg);
            backdrop-filter: blur(var(--blur-amount));
        }

        .usage.hidden {
            transform: translateX(-50%) translateY(calc(100% + 1rem));
            opacity: 0;
            visibility: hidden;
        }

        .toast {
            position: fixed;
            top: 10%;
            left: 50%;
            width: 80%;
            height: 20vh;
            text-align: center;
            place-content: center;
            transform: translateX(-50%);
            outline: 50rem solid var(--lo);
            mix-blend-mode: difference;
            font-weight: 800;
            backdrop-filter: blur(var(--blur-amount));
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-xl);
            font-size: 1.6rem;
            opacity: 0;
            text-transform: uppercase;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            display: grid;
            grid-auto-flow: column;
            place-items: center;
            gap: 2rem;
        }

        .toast.show {
            opacity: 1;
            visibility: visible;
        }

        .loader {
            --size: 20rem;
            --blur: 5rem;
            width: var(--size);
            aspect-ratio: 1;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            background: conic-gradient(from 0deg,
                    var(--pk0) 0%,
                    var(--wk1) 50%,
                    var(--pk1) 100%);
            filter: blur(var(--blur));
            animation: spin 1s linear infinite;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
            z-index: 9999;
            pointer-events: none;
            box-shadow: 0 0 4em 16em var(--sk8);
        }

        .loader.show {
            opacity: 0.8;
            visibility: visible;
            pointer-events: all;
        }

        .loader.show::before {
            opacity: 0.8;
            pointer-events: all;
        }

        @keyframes spin {
            to {
                transform: translate(-50%, -50%) rotate(1turn);
            }
        }
    </style>
</head>

<body>
    <div class="loader"></div>
    <span id="seed"></span>
    <a id="github" href="https://github.com/metaory/gradient-gl" target="_blank" rel="noopener noreferrer">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24">
            <path fill="currentColor" fill-opacity="0"
                d="M15 4.5c-0.39 -0.1 -1.33 -0.5 -3 -0.5c-1.67 0 -2.61 0.4 -3 0.5c-0.53 -0.43 -1.94 -1.5 -3.5 -1.5c-0.34 1 -0.29 2.22 0 3c-0.75 1 -1 2 -1 3.5c0 2.19 0.48 3.58 1.5 4.5c1.02 0.92 2.11 1.37 3.5 1.5c-0.65 0.54 -0.5 1.87 -0.5 2.5v4h6v-4c0 -0.63 0.15 -1.96 -0.5 -2.5c1.39 -0.13 2.48 -0.58 3.5 -1.5c1.02 -0.92 1.5 -2.31 1.5 -4.5c0 -1.5 -0.25 -2.5 -1 -3.5c0.29 -0.78 0.34 -2 0 -3c-1.56 0 -2.97 1.07 -3.5 1.5Z">
                <animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.15s" values="0;0.3" />
            </path>
            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
                <path stroke-dasharray="32" stroke-dashoffset="32"
                    d="M12 4c1.67 0 2.61 0.4 3 0.5c0.53 -0.43 1.94 -1.5 3.5 -1.5c0.34 1 0.29 2.22 0 3c0.75 1 1 2 1 3.5c0 2.19 -0.48 3.58 -1.5 4.5c-1.02 0.92 -2.11 1.37 -3.5 1.5c0.65 0.54 0.5 1.87 0.5 2.5c0 0.73 0 3 0 3M12 4c-1.67 0 -2.61 0.4 -3 0.5c-0.53 -0.43 -1.94 -1.5 -3.5 -1.5c-0.34 1 -0.29 2.22 0 3c-0.75 1 -1 2 -1 3.5c0 2.19 0.48 3.58 1.5 4.5c1.02 0.92 2.11 1.37 3.5 1.5c-0.65 0.54 -0.5 1.87 -0.5 2.5c0 0.73 0 3 0 3">
                    <animate fill="freeze" attributeName="stroke-dashoffset" dur="0.7s" values="32;0" />
                </path>
                <path stroke-dasharray="10" stroke-dashoffset="10"
                    d="M9 19c-1.41 0 -2.84 -0.56 -3.69 -1.19c-0.84 -0.63 -1.09 -1.66 -2.31 -2.31">
                    <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.8s" dur="0.2s" values="10;0" />
                </path>
            </g>
        </svg>
    </a>
    <main>
        <div id="shaders"></div>
        <div id="options"></div>
        <div class="usage"></div>
    </main>
    <div class="toast">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24">
            <path fill="springgreen" fill-rule="evenodd"
                d="M12 22c-4.714 0-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22m4.03-13.03a.75.75 0 0 1 0 1.06l-5 5a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 1 1 1.06-1.06l1.47 1.47l4.47-4.47a.75.75 0 0 1 1.06 0"
                clip-rule="evenodd" />
        </svg>
        URL copied to clipboard
    </div>
    <script type="module">
        import gradient from './index.js'
        import shaders from './shaders/index.js'

        const pipe = (...fns) => x => fns.reduce((v, f) => f(v), x)
        const setProps = (el, props) => {
            if (!props) return el
            for (const [k, v] of Object.entries(props)) {
                if (k === 'dataset') {
                    for (const [dk, dv] of Object.entries(v)) {
                        el.dataset[dk] = dv
                    }
                } else {
                    el[k] = v
                }
            }
            return el
        }

        const copyToClipboard = async (text) => {
            try {
                await navigator.clipboard.writeText(text);
                return true;
            } catch (err) {
                console.error('Failed to copy:', err);
                return false;
            }
        }

        const showToast = (message) => {
            const toast = query('.toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }

        const mkEl = (tag, props = {}, children = []) => {
            const el = document.createElement(tag)
            setProps(el, props)
            if (children?.length) {
                for (const child of children) el.append(child)
            }
            return el
        }

        const query = document.querySelector.bind(document)
        const getEl = document.getElementById.bind(document)
        const loader = query('.loader')

        // Debounce function to prevent too many updates
        const debounce = (fn, delay = 100) => {
            let timeout
            return (...args) => {
                clearTimeout(timeout)
                timeout = setTimeout(() => fn(...args), delay)
            }
        }

        const sleep = (s = 3) => new Promise(resolve => setTimeout(resolve, s * 1_000));

        // Usage interface state
        const usageState = {
            update: async () => {
                const usage = query('.usage');
                const currentSeed = controlState.seed;

                const example = `import gradientGL from "gradient-gl"\n\nawait gradientGL("${currentSeed}")`;

                const { codeToHtml } = await import('https://esm.sh/shiki@3.0.0');
                const html = await codeToHtml(example, {
                    lang: 'javascript',
                    theme: 'laserwave',
                    transformers: [
                        {
                            pre(node) {
                                delete node.properties.style;
                                return node;
                            }
                        }
                    ]
                });
                usage.innerHTML = html;
            }
        }

        // Control interface state
        const controlState = {
            seed: '',
            isVisible: true,
            update: debounce(async () => {
                const shader = query('.shader[data-selected="true"]')?.dataset.shader
                if (!shader) return

                const values = ['speed', 'hue', 'saturation', 'lightness']
                    .map(id => parseInt(getEl(id).value, 10).toString(16).toLowerCase());

                const newSeed = `${shader}.${values.join('')}`
                if (newSeed === controlState.seed) return

                controlState.seed = newSeed
                getEl('seed').textContent = controlState.seed

                loader.classList.toggle('show', true)
                document.body.style.pointerEvents = 'none'
                await gradient(controlState.seed)
                loader.classList.toggle('show', false)
                document.body.style.pointerEvents = ''
                usageState.update()

                // Only clear URL hash if this is not the initial load
                if (window.location.hash && !window.location.hash.includes(controlState.seed)) {
                    window.location.hash = ''
                }
            }, 50)
        }

        // Load seed from URL hash if present
        const loadSeedFromUrl = () => {
            const hash = window.location.hash.slice(1)
            if (!hash) return false

            console.log('Loading seed from URL:', hash)
            const [shader, values] = hash.split('.')
            if (!shader || !values || values.length !== 4) {
                console.log('Invalid seed format:', hash)
                return false
            }

            // Split values into individual hex digits
            const hexValues = values.split('')

            // Set shader
            const shaderBtn = query(`.shader[data-shader="${shader}"]`)
            if (!shaderBtn) {
                console.log('Shader not found:', shader)
                return false
            }

            document.querySelectorAll('.shader').forEach(opt => {
                opt.dataset.selected = opt === shaderBtn ? 'true' : 'false'
            })

            // Set values
            const ids = ['speed', 'hue', 'saturation', 'lightness']
            hexValues.forEach((value, i) => {
                const input = getEl(ids[i])
                if (!input) return
                const intValue = parseInt(value, 16)
                input.value = intValue
                input.dataset.hexValue = value
            })

            console.log('Successfully loaded seed from URL')
            return true
        }

        // UI Components
        const createRangeInput = ({ id, label }) => {
            const input = mkEl('input', {
                type: 'range',
                id,
                title: label,
                min: 0,
                max: 15,
                value: 7,
                dataset: { hexValue: '7' },
                oninput: (e) => {
                    e.target.dataset.hexValue = e.target.value.toString(16).toLowerCase();
                    controlState.update();
                }
            });
            return input;
        }

        const createShaderOption = shader => mkEl('button', {
            className: 'shader',
            textContent: shader,
            dataset: { shader },
            onclick: (e) => {
                const target = e.target
                document.querySelectorAll('.shader').forEach(opt => {
                    opt.dataset.selected = opt === target ? 'true' : 'false'
                })
                controlState.update()
            }
        })

        if (!shaders?.length) {
            console.error('No shaders available')
        }

        // Create shader UI
        getEl('shaders').append(
            ...Object.values(
                shaders.reduce((acc, shader) => {
                    acc[shader[0]] = [...(acc[shader[0]] || []), shader]
                    return acc
                }, {})
            ).map(variations =>
                mkEl('div', { className: 'shader-type' },
                    variations.map(createShaderOption)))
        )

        // Generate random option values
        const randomizeOptions = () => {
            // Randomize shader
            const randomShader = shaders[Math.floor(Math.random() * shaders.length)];
            const shaderButtons = document.querySelectorAll('.shader');
            shaderButtons.forEach(btn => {
                btn.dataset.selected = btn.dataset.shader === randomShader ? 'true' : 'false';
            });

            // Randomize other options
            ['speed', 'hue', 'saturation', 'lightness'].forEach(id => {
                const input = getEl(id);
                if (!input) return;
                const randomValue = Math.floor(Math.random() * 16);
                input.value = randomValue;
                input.dataset.hexValue = randomValue.toString(16);
            });
            controlState.update();
        }

        getEl('options').append(
            ...['speed', 'hue', 'saturation', 'lightness'].map(id =>
                createRangeInput({ id, label: id }))
        )

        // Try loading from URL first, fallback to random
        if (!loadSeedFromUrl()) {
            randomizeOptions();
        } else {
            controlState.update();
        }

        // Add button to randomize values again
        const randomizeBtn = mkEl('button', {
        //   /* shuffle */  innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 22c-4.714 0-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22m4.262-14.523a.75.75 0 0 1 1.06-.015l1.2 1.167a.75.75 0 0 1 0 1.075l-1.2 1.167a.75.75 0 0 1-1.146-.954h-.338c-.511 0-.844 0-1.1.025c-.242.023-.36.062-.444.109c-.084.046-.176.12-.318.307c-.152.2-.323.474-.586.902l-1.52 2.463c-.242.39-.45.729-.652.994c-.218.286-.46.532-.789.713c-.328.18-.666.254-1.025.288c-.336.032-.74.032-1.21.032H6a.75.75 0 0 1 0-1.5h2.162c.511 0 .844 0 1.1-.025c.243-.023.36-.062.444-.11c.084-.045.176-.12.318-.306c.152-.2.323-.475.586-.902l1.52-2.464c.242-.39.45-.728.652-.994c.218-.285.46-.531.789-.712c.328-.18.666-.255 1.025-.289c.336-.031.74-.031 1.21-.031h.37a.75.75 0 0 1 .086-.94M9.385 9.77c-.085-.017-.185-.02-.584-.02H6a.75.75 0 0 1 0-1.5h2.858c.313 0 .565 0 .806.045a2.56 2.56 0 0 1 1.405.775c.167.18.299.394.459.653l.03.05a.75.75 0 1 1-1.276.788c-.206-.334-.259-.413-.313-.472a1.06 1.06 0 0 0-.584-.32m3.301 3.26a.75.75 0 0 1 1.032.244c.206.333.259.412.313.471c.151.163.355.277.584.32c.085.016.186.02.584.02h.977a.75.75 0 0 1 1.147-.955l1.2 1.167a.75.75 0 0 1 0 1.075l-1.2 1.167a.75.75 0 0 1-1.147-.955h-1.034c-.313 0-.565 0-.806-.045a2.56 2.56 0 0 1-1.405-.775c-.167-.18-.299-.394-.459-.653l-.03-.05a.75.75 0 0 1 .244-1.032" clip-rule="evenodd"/></svg>`,
        //   /* shuffle */  innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" d="M12 22c-4.714 0-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22" opacity="0.5"/><path fill="currentColor" d="M16.262 7.477a.75.75 0 0 1 1.06-.015l1.2 1.167a.75.75 0 0 1 0 1.075l-1.2 1.167a.75.75 0 0 1-1.146-.954h-.338c-.511 0-.844 0-1.1.025c-.242.023-.36.062-.444.109c-.084.046-.176.12-.318.307c-.152.2-.323.474-.586.902l-1.52 2.463c-.242.39-.45.729-.652.994c-.218.286-.46.532-.789.713c-.328.18-.666.254-1.025.288c-.336.032-.74.032-1.21.032H6a.75.75 0 0 1 0-1.5h2.162c.511 0 .844 0 1.1-.025c.243-.023.36-.062.444-.11c.084-.045.176-.12.318-.306c.152-.2.323-.475.586-.902l1.52-2.464c.242-.39.45-.728.652-.994c.218-.285.46-.531.789-.712c.328-.18.666-.255 1.025-.289c.336-.031.74-.031 1.21-.031h.37a.75.75 0 0 1 .086-.94"/><path fill="currentColor" d="M9.385 9.77c-.085-.017-.186-.02-.584-.02H6a.75.75 0 0 1 0-1.5h2.858c.313 0 .565 0 .806.045a2.56 2.56 0 0 1 1.405.775c.167.18.299.394.459.653l.03.05a.75.75 0 1 1-1.276.788c-.206-.334-.259-.413-.313-.472a1.06 1.06 0 0 0-.584-.32m3.301 3.259a.75.75 0 0 1 1.032.245c.206.333.259.412.313.471c.151.163.355.277.584.32c.085.016.186.02.584.02h.977a.75.75 0 0 1 1.147-.955l1.2 1.167a.75.75 0 0 1 0 1.075l-1.2 1.167a.75.75 0 0 1-1.147-.955h-1.034c-.313 0-.565 0-.806-.045a2.56 2.56 0 0 1-1.405-.775c-.167-.18-.299-.394-.459-.653l-.03-.05a.75.75 0 0 1 .244-1.032"/></svg>`,


        //  /* transfer */  innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12m15 1.25a.75.75 0 0 1 .493 1.315l-3.437 3a.75.75 0 0 1-.987-1.13L15 14.75H7a.75.75 0 0 1 0-1.5zm-5.997-6.743a.75.75 0 0 1-.072 1.058L9 9.25h8a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.493-1.315l3.437-3a.75.75 0 0 1 1.059.072" clip-rule="evenodd"/></svg>`,
         /* transfer */   innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" d="M20.536 20.536C22 19.07 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465" opacity="0.5"/><path fill="currentColor" d="M7 10.75a.75.75 0 0 1-.493-1.315l3.437-3a.75.75 0 0 1 .987 1.13L9 9.25h8a.75.75 0 0 1 0 1.5zm6.07 5.685a.75.75 0 0 0 .986 1.13l3.437-3A.75.75 0 0 0 17 13.25H7a.75.75 0 0 0 0 1.5h8z"/></svg>`,

            // innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24"><path fill="currentColor" d="M3.464 20.536C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535" opacity="0.5"/><path fill="currentColor" d="M9.5 8.75A3.25 3.25 0 1 0 12.75 12a.75.75 0 0 1 1.5 0A4.75 4.75 0 1 1 9.5 7.25a.75.75 0 0 1 0 1.5"/><path fill="currentColor" d="M17.75 12a3.25 3.25 0 0 1-3.25 3.25a.75.75 0 0 0 0 1.5A4.75 4.75 0 1 0 9.75 12a.75.75 0 0 0 1.5 0a3.25 3.25 0 0 1 6.5 0"/></svg>`,
            onclick: randomizeOptions,
        });

        const copyBtn = mkEl('button', {
            // innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" d="M6.6 11.397c0-2.726 0-4.089.843-4.936c.844-.847 2.201-.847 4.917-.847h2.88c2.715 0 4.073 0 4.916.847c.844.847.844 2.21.844 4.936v4.82c0 2.726 0 4.089-.844 4.936c-.843.847-2.201.847-4.916.847h-2.88c-2.716 0-4.073 0-4.917-.847s-.843-2.21-.843-4.936z"/><path fill="currentColor" d="M4.172 3.172C3 4.343 3 6.229 3 10v2c0 3.771 0 5.657 1.172 6.828c.617.618 1.433.91 2.62 1.048c-.192-.84-.192-1.996-.192-3.66v-4.819c0-2.726 0-4.089.843-4.936c.844-.847 2.201-.847 4.917-.847h2.88c1.652 0 2.8 0 3.638.19c-.138-1.193-.43-2.012-1.05-2.632C16.657 2 14.771 2 11 2S5.343 2 4.172 3.172" opacity="0.5"/></svg>`,

            innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" d="M3.464 20.536C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535" opacity="0.5"/><path fill="currentColor" d="M9.5 8.75A3.25 3.25 0 1 0 12.75 12a.75.75 0 0 1 1.5 0A4.75 4.75 0 1 1 9.5 7.25a.75.75 0 0 1 0 1.5"/><path fill="currentColor" d="M17.75 12a3.25 3.25 0 0 1-3.25 3.25a.75.75 0 0 0 0 1.5A4.75 4.75 0 1 0 9.75 12a.75.75 0 0 0 1.5 0a3.25 3.25 0 0 1 6.5 0"/></svg>`,
            // innerHTML: `<svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3.464 20.536C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535M9.5 8.75A3.25 3.25 0 1 0 12.75 12a.75.75 0 0 1 1.5 0A4.75 4.75 0 1 1 9.5 7.25a.75.75 0 0 1 0 1.5M17.75 12a3.25 3.25 0 0 1-3.25 3.25a.75.75 0 0 0 0 1.5A4.75 4.75 0 1 0 9.75 12a.75.75 0 0 0 1.5 0a3.25 3.25 0 0 1 6.5 0" clip-rule="evenodd"/></svg>`,
            onclick: async () => {
                window.location.hash = controlState.seed;
                if (await copyToClipboard(window.location.href)) {
                    showToast('URL copied to clipboard');
                }
            },
        });

        const buttonContainer = mkEl('div', {
            id: 'actions',
            // style: 'margin-top: var(--spacing-xs);',
        }, [randomizeBtn, copyBtn]);

        // getEl('options').appendChild(buttonContainer);

        // Add toggle buttons
        const main = query('main');
        const usage = query('.usage');

        // main.appendChild(buttonContainer);
        // main.appendChild(randomizeBtn);
        // main.appendChild(copyBtn);

        const toggleSvg = [
            `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464m6.54 1.787a.75.75 0 0 1 .743.756c-.007.851-.033 1.577-.151 2.18c-.122.623-.352 1.166-.798 1.612s-.99.676-1.613.798c-.602.118-1.328.144-2.179.151a.75.75 0 1 1-.012-1.5c.856-.007 1.453-.035 1.903-.123c.429-.084.666-.212.84-.387c.175-.174.303-.411.387-.84c.088-.45.116-1.048.123-1.903a.75.75 0 0 1 .757-.744m3.99 0a.75.75 0 0 1 .756.744c.007.855.035 1.453.123 1.903c.084.429.213.666.387.84c.174.175.411.303.84.387c.45.088 1.048.116 1.904.123a.75.75 0 0 1-.013 1.5c-.85-.007-1.577-.033-2.18-.151c-.623-.122-1.166-.352-1.612-.798s-.675-.99-.798-1.613c-.118-.602-.144-1.328-.151-2.179a.75.75 0 0 1 .743-.756m-7.988 8a.75.75 0 0 0-.012 1.5c.856.007 1.453.035 1.903.123c.429.084.666.212.84.386c.175.175.303.412.387.84c.088.45.116 1.048.123 1.904a.75.75 0 0 0 1.5-.013c-.007-.85-.033-1.576-.151-2.179c-.122-.623-.352-1.166-.798-1.612s-.99-.676-1.613-.798c-.602-.118-1.328-.144-2.179-.152m12.741.743a.75.75 0 0 1-.743.756c-.856.008-1.454.036-1.904.124c-.429.084-.666.212-.84.386c-.175.175-.303.412-.387.84c-.088.45-.116 1.048-.123 1.904a.75.75 0 1 1-1.5-.013c.007-.85.033-1.576.151-2.179c.123-.623.352-1.166.798-1.612s.99-.676 1.613-.798c.602-.118 1.328-.144 2.179-.152a.75.75 0 0 1 .756.744" clip-rule="evenodd"/></svg>`,
            `<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3.464 3.464C2 4.93 2 7.286 2 12s0 7.071 1.464 8.535C4.93 22 7.286 22 12 22s7.071 0 8.535-1.465C22 19.072 22 16.714 22 12s0-7.071-1.465-8.536C19.072 2 16.714 2 12 2S4.929 2 3.464 3.464m7.283 2.53a.75.75 0 0 1-.743.756c-.856.007-1.454.035-1.904.124c-.428.084-.666.212-.84.386s-.302.412-.386.84c-.088.45-.117 1.048-.124 1.904a.75.75 0 0 1-1.5-.013c.007-.85.034-1.577.152-2.179c.122-.623.351-1.167.797-1.613s.99-.675 1.613-.797c.602-.118 1.328-.145 2.179-.152a.75.75 0 0 1 .756.744m2.503 0a.75.75 0 0 1 .757-.744c.85.007 1.576.034 2.179.152c.623.122 1.166.351 1.612.797s.676.99.798 1.613c.118.602.144 1.328.151 2.179a.75.75 0 0 1-1.5.013c-.007-.856-.035-1.454-.123-1.904c-.084-.428-.212-.666-.386-.84s-.412-.302-.84-.386c-.45-.088-1.048-.117-1.904-.124a.75.75 0 0 1-.744-.756m-6.5 8a.75.75 0 0 0-1.5.013c.007.85.034 1.577.152 2.179c.122.623.351 1.167.797 1.613s.99.675 1.613.797c.602.119 1.328.145 2.179.152a.75.75 0 0 0 .013-1.5c-.856-.007-1.454-.036-1.904-.123c-.428-.084-.666-.213-.84-.387s-.302-.412-.386-.84c-.088-.45-.117-1.048-.124-1.904m11.254-.743a.75.75 0 0 1 .743.756c-.007.85-.033 1.577-.151 2.179c-.122.623-.352 1.167-.798 1.613s-.99.675-1.612.797c-.603.119-1.329.145-2.18.152a.75.75 0 1 1-.012-1.5c.856-.007 1.454-.036 1.903-.123c.429-.084.666-.213.84-.387c.175-.174.303-.412.387-.84c.088-.45.116-1.048.124-1.904a.75.75 0 0 1 .756-.743" clip-rule="evenodd"/></svg>`,
        ]
        const mainToggle = mkEl('button', {
            id: 'toggle',
            innerHTML: toggleSvg[Number(controlState.isVisible)],
            onclick: () => {
                controlState.isVisible = !controlState.isVisible;
                main.classList.toggle('hidden');
                usage.classList.toggle('hidden');
                mainToggle.innerHTML = toggleSvg[Number(controlState.isVisible)];
            }
        });

        document.body.appendChild(buttonContainer);
        document.body.appendChild(mainToggle);

        // Add copy functionality to seed
        const seedEl = getEl('seed');
        seedEl.style.cursor = 'pointer';
        seedEl.onclick = async () => {
            if (await copyToClipboard(seedEl.textContent)) {
                showToast('Seed copied to clipboard');
            }
        };

        // Add copy functionality to usage
        const usageEl = query('.usage');
        usageEl.style.cursor = 'pointer';
        usageEl.onclick = async () => {
            const code = usageEl.querySelector('code')?.textContent;
            if (code && await copyToClipboard(code)) {
                showToast('Code copied to clipboard');
            }
        };
    </script>
</body>

</html>